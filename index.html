<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Board Game Quick Menus</title>
<link rel="icon" href="data:," />
<style>
  :root{
    --brand:#0b63ff; --bg:#f6f7fb; --fg:#111; --muted:#555; --card:#fff; --border:#e6e6ef;
    --btn:#fff; --btn-border:#dcdce6;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  }
  :root[data-theme="dark"]{
    --brand:#5b8dff; --bg:#0f1115; --fg:#e8eaf0; --muted:#a2a8b4; --card:#161922; --border:#2a2f3a; --btn:#1b2030; --btn-border:#2a2f3a;
  }
  @media (prefers-color-scheme: dark){
    :root:not([data-theme]){
      --brand:#5b8dff; --bg:#0f1115; --fg:#e8eaf0; --muted:#a2a8b4; --card:#161922; --border:#2a2f3a; --btn:#1b2030; --btn-border:#2a2f3a;
    }
  }
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--fg);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}
  img{max-width:100%;height:auto;display:block}
  header{position:sticky;top:0;z-index:5;background:var(--brand);color:#fff;padding:10px 14px;box-shadow:0 2px 12px rgba(0,0,0,.15)}
  header .wrap{max-width:1000px;margin:0 auto;display:flex;gap:10px;align-items:center}
  header h1{margin:0;font-size:1rem;white-space:nowrap}
  header .spacer{flex:1}
  header button.toggle{appearance:none;border:1px solid rgba(255,255,255,.35);background:transparent;color:#fff;border-radius:9px;padding:8px 10px;cursor:pointer;font-weight:600}
  header a.home{color:#fff;text-decoration:none;border:1px solid rgba(255,255,255,.35);border-radius:9px;padding:8px 10px}
  main{max-width:1000px;margin:16px auto 40px;padding:0 14px}

  /* List view */
  #search{width:100%;padding:12px;border-radius:10px;border:1px solid var(--border);background:var(--card);color:var(--fg);margin-bottom:12px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:10px;text-decoration:none;color:inherit;display:flex;gap:10px}
  .thumb{width:64px;height:64px;border-radius:8px;background:#0001;flex:0 0 auto;overflow:hidden}
  .thumb img{width:100%;height:100%;object-fit:cover}
  .metaWrap{min-width:0}
  .card h2{margin:.1rem 0 .25rem;font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .sub{color:var(--muted);font-size:.85rem;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

   /* Detail view */
.detail{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:16px;
  display:grid;
  grid-template-columns:260px 1fr;
  gap:16px;
}

/* Show full cover (no crop) */
.cover{
  border-radius:12px;
  overflow:hidden;
  background:#0001;
  justify-self:center;      /* center the cover art in its column */
  max-width:130px;          /* half-ish of the 260px column */
}

.cover img{
  width:100%;
  height:auto;
  display:block;
  object-fit:contain;       /* show full image, no cropping */
}

.title{
  margin:.2rem 0 .25rem;
  font-size:1.2rem;
  line-height:1.2;
}
.byline{
  color:var(--muted);
  font-size:.92rem;
  margin:0 0 10px;
}

/* Actions + buttons */
.actions{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:6px;
}

.btn,
.btnlink{
  display:block;
  width:100%;
  text-align:center;
  padding:14px;
  border-radius:12px;
  border:1px solid var(--btn-border);
  background:var(--btn);
  color:inherit;
  text-decoration:none;
  font-weight:700;
  cursor:pointer;
  box-sizing:border-box;    /* <-- THIS is what stops them falling off */
}

.btn.primary{
  background:var(--brand);
  color:#fff;
  border:none;
}
  .btn.primary{background:var(--brand);color:#fff;border:none}
  .qs,.exp{margin-top:8px;padding:10px;border:1px dashed var(--border);border-radius:12px;background:color-mix(in oklab, var(--card) 90%, var(--brand) 10%)}
  .qs pre{white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;margin:0}
  .exp h3{margin:.2rem 0 .6rem;font-size:1.05rem}
  .exp ul{margin:.2rem 0 .2rem 1.1rem}
  .exp a{color:inherit}
  footer{text-align:center;font-size:.8rem;color:var(--muted);margin-top:16px}

  /* Expansion details */
  .expansion{
    margin-bottom:8px;
  }
  .expansion summary{
    cursor:pointer;
    list-style:none;
    font-weight:600;
  }
  .expansion summary::-webkit-details-marker{
    display:none;
  }
  .expansion-body{
    margin-top:6px;
  }
  .expansion-text-block h4{
    margin:.2rem 0 .25rem;
    font-size:.95rem;
  }
  .expansion-text-block p{
    margin:0 0 .4rem;
    font-size:.85rem;
    line-height:1.4;
  }
  .expansion-btns{
    display:flex;
    flex-direction:column;
    gap:6px;
    margin-top:4px;
  }
  .expansion-name{
    font-weight:600;
  }

  @media (max-width:840px){
    .detail{grid-template-columns:1fr}
    .cover{width:100%}
  }
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Board Game Quick Menus</h1>
    <div class="spacer"></div>
    <button id="themeToggle" class="toggle" aria-label="Toggle dark mode">üåô/‚òÄÔ∏è</button>
    <a class="home" href="#/">All Games</a>
  </div>
</header>

<main id="app"><noscript>JavaScript required.</noscript></main>

<script id="games-json" type="application/json">
{
  "names": [
    "7 Wonders",
    "7 Wonders Duel",
    "Acquire",
    "Air, Land & Sea: Critters at War",
    "Archduke",
    "Ark Nova",
    "Azul",
    "Backgammon",
    "Brass: Birmingham",
    "Candy Land: Bluey",
    "Century: Golem Edition",
    "Chess",
    "Chronicles of Crime",
    "Cover Your Assets",
    "Dune: Imperium - Uprising",
    "Dutch Blitz",
    "The Fellowship of the Ring Trick-Taking Game",
    "Five Crowns",
    "For Sale",
    "Forbidden Island",
    "Foundations of Metropolis",
    "Heat: Pedal to the Metal",
    "Jaipur",
    "Kingdomino",
    "Kingdomino Origins",
    "Monopoly Deal",
    "Moonrakers: Titan Edition",
    "Moonrollers",
    "New York Zoo",
    "Pan Am",
    "PARKS",
    "Patchwork",
    "Play Nine",
    "Project L",
    "Quacks of Quedlinburg",
    "Radlands",
    "Rage",
    "Ravine",
    "Rook",
    "Rummikub",
    "Sail",
    "Sequence",
    "Skip-Bo",
    "Sky Team",
    "Sniper Elite",
    "Splendor",
    "Star Wars: The Deck-Building Game",
    "Vinhos Deluxe Edition",
    "Watergate",
    "Wingspan",
    "Harmonies",
    "Forest Shuffle",
    "Marvel Villainous",
    "Brink",
    "Tend", 
    "Pillars of Fate",
    "Graft", 
    "Time to Panic"
  ],
  "enrich": {
    "7-wonders":                        { "players":"3‚Äì7", "time":"30",     "year":"2010", "bggId":"68448",  "quickStart":"<p>Remove age cards not applicable for the player count.<br><br>Remove all purple cards from Age III. Shuffle them together and draw for player count +2. Shuffle back into Age III.<br><br>Each player starts with 3 coins.<br>Deal 7 cards to each player.</p>", "remindersText": "<p>The last card during the drafting of each age will be discarded.</p>", "playerCountSetup": "<p>Remove cards based on player count.</p>", "startingResources": "3 Coins", "turnStructure": "<p><strong>Draft</strong><br><br>Each player takes a card and passes their hand the direction shown on the Age cards.</p>", "commonMistakes": "", "expansions": [ {"name": "Armada", "quickStart": "<p>Test<br>Test 3</p>", "reminders": "Test", "rulebook": "", "youtube": "", "bggId": ""}, {"name": "Cities", "quickStart": "Test 2", "reminders": "Test 2", "rulebook": "", "youtube": "", "bggId": ""}]},
    "7-wonders-duel":                   { "players":"2",   "time":"30",     "year":"2015", "bggId":"173346", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "acquire":                          { "players":"2‚Äì6", "time":"90",     "year":"1964", "bggId":"5",      "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "air-land-sea-critters-at-war":     { "players":"2",   "time":"20",     "year":"2021", "bggId":"304420", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "archduke":                         { "players":"*",   "time":"*",      "year":"*",    "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "ark-nova":                         { "players":"1‚Äì4", "time":"120‚Äì180","year":"2021", "bggId":"342942", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "azul":                             { "players":"2‚Äì4", "time":"30‚Äì45",  "year":"2017", "bggId":"230802", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "backgammon":                       { "players":"2",   "time":"30",     "year":"*",    "bggId":"11951",  "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "brass-birmingham":                 { "players":"2‚Äì4", "time":"90‚Äì150", "year":"2018", "bggId":"224517", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "candy-land-bluey":                 { "players":"*",   "time":"*",      "year":"*",    "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "century-golem-edition":            { "players":"2‚Äì5", "time":"30‚Äì45",  "year":"2017", "bggId":"232832", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "chess":                            { "players":"2",   "time":"30‚Äì60",  "year":"*",    "bggId":"171",    "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "chronicles-of-crime":              { "players":"1‚Äì4", "time":"60‚Äì90" , "year":"2018", "bggId":"239188", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "cover-your-assets":                { "players":"2‚Äì6", "time":"20‚Äì40",  "year":"2008", "bggId":"48726",  "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "dune-imperium-uprising":           { "players":"1‚Äì6", "time":"60‚Äì120", "year":"2023", "bggId":"386211", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "dutch-blitz":                      { "players":"2‚Äì4", "time":"15",     "year":"1960", "bggId":"1239",   "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "the-fellowship-of-the-ring-trick-taking-game": { "players":"*", "time":"*", "year":"*", "bggId":"",     "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "five-crowns":                      { "players":"1‚Äì7", "time":"20‚Äì45",  "year":"1996", "bggId":"5011",   "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "for-sale":                         { "players":"3‚Äì6", "time":"20",     "year":"1997", "bggId":"172",    "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "forbidden-island":                 { "players":"2‚Äì4", "time":"30",     "year":"2010", "bggId":"65244",  "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "foundations-of-metropolis":        { "players":"*",   "time":"*",      "year":"*",    "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
   "heat-pedal-to-the-metal": {
  "players": "2‚Äì6",
  "time": "45‚Äì60",
  "year": "2022",
  "bggId": "366013",

  "quickStart": "- Give each player: 1 car, dashboard, 12-card deck, 6 Heat, 3 Stress\n- Set gear to 2nd\n- Randomize starting grid\n- Choose track + place corner speeds\n- Shuffle Stress into decks\n- Each player draws 7 cards",

  "startingResources": "- 12-card deck\n- 6 Heat cubes\n- 3 Stress cards\n- Car miniature + dashboard\n- Gear marker on 2nd gear",

  "remindersText": "- Shift only 1 gear unless you pay Heat\n- Heat must be paid when exceeding corner speed\n- Slipstream triggers if ending next to/behind a car\n- Cooldown happens at end of turn\n- Stress flips until total speed is met\n- Draw back to 7 each round",

  "playerCountSetup": "- 2p: bots recommended\n- 3‚Äì6p: standard setup\n- No components are removed at low counts\n- Track choice does not affect setup",

  "turnStructure": "- Shift\n- Play cards\n- Resolve effects\n- Check corners\n- Move\n- Slipstream\n- Cooldown + draw",

  "commonMistakes": "- Not paying Heat at corners\n- Forgetting slipstream\n- Miscounting which corner was passed\n- Playing Stress incorrectly\n- Staying in high gear too long",

  "expansions": [
    {
      "name": "Heavy Rain",
      "quickStart": "- Add new tracks (Japan/Mexico)\n- Support 7 players\n- Add weather/road modules\n- Add new upgrade/sponsor/event cards",
      "reminders": "- Weather changes corner speeds\n- More technical track layouts\n- Sponsorship cards add between-race powers",
      "rulebook": "",
      "youtube": "",
      "bggId": "410291"
    },
    {
      "name": "Tunnel Vision",
      "quickStart": "- Add Netherlands/Spain tracks\n- Add tunnel + chicane rules\n- Add Front Wing upgrades\n- Add new event/sponsor cards",
      "reminders": "- Tunnels restrict movement options\n- Some corners are extremely tight\n- Front Wing improves slipstream interactions",
      "rulebook": "",
      "youtube": "",
      "bggId": "436904"
    }
  ]
}   
    "jaipur":                           { "players":"2",   "time":"30",     "year":"2009", "bggId":"54043",  "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "kingdomino":                       { "players":"2‚Äì4", "time":"15‚Äì30",  "year":"2016", "bggId":"204583", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "kingdomino-origins":               { "players":"2‚Äì4", "time":"25‚Äì45",  "year":"2021", "bggId":"329438", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "monopoly-deal":                    { "players":"2‚Äì5", "time":"15",     "year":"2008", "bggId":"37904",  "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "moonrakers-titan-edition":         { "players":"1‚Äì5", "time":"60‚Äì120", "year":"2020", "bggId":"438924", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "moonrollers":                      { "players":"*",   "time":"*",      "year":"*",    "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "new-york-zoo":                     { "players":"1‚Äì5", "time":"30‚Äì60",  "year":"2020", "bggId":"305049", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "pan-am":                           { "players":"2‚Äì4", "time":"60",     "year":"2020", "bggId":"318977", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "parks":                            { "players":"1‚Äì5", "time":"40‚Äì60",  "year":"2019", "bggId":"266524", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "patchwork":                        { "players":"2",   "time":"30",     "year":"2014", "bggId":"163412", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "play-nine":                        { "players":"2‚Äì6", "time":"30‚Äì45",  "year":"2004", "bggId":"38658",  "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "project-l":                        { "players":"1‚Äì4", "time":"20‚Äì40",  "year":"2020", "bggId":"260180", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "quacks-of-quedlinburg":            { "players":"2‚Äì4", "time":"45",     "year":"2018", "bggId":"244521", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "radlands":                         { "players":"2",   "time":"20‚Äì30",  "year":"2021", "bggId":"329082", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "rage":                             { "players":"2‚Äì8", "time":"45‚Äì60",  "year":"1983", "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "ravine":                           { "players":"3‚Äì6", "time":"20‚Äì60",  "year":"2017", "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "rook":                             { "players":"2‚Äì6", "time":"30‚Äì90",  "year":"1906", "bggId":"265",    "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "rummikub":                         { "players":"2‚Äì4", "time":"60",     "year":"1977", "bggId":"811",    "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "sail":                             { "players":"2",   "time":"20‚Äì30",  "year":"2023", "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "sequence":                         { "players":"2‚Äì12","time":"10‚Äì30",  "year":"1981", "bggId":"2653",   "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "skip-bo":                          { "players":"2‚Äì6", "time":"20‚Äì45",  "year":"1967", "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "sky-team":                         { "players":"2",   "time":"20‚Äì40",  "year":"2023", "bggId":"373106", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "sniper-elite":                     { "players":"1‚Äì4", "time":"60‚Äì90",  "year":"2021", "bggId":"310041", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "splendor":                         { "players":"2‚Äì4", "time":"30",     "year":"2014", "bggId":"148228", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "star-wars-the-deck-building-game": { "players":"2",   "time":"30",     "year":"2023", "bggId":"376353", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "vinhos-deluxe-edition":            { "players":"1‚Äì4", "time":"90‚Äì150", "year":"2016", "bggId":"175640", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "watergate":                        { "players":"2",   "time":"30‚Äì45",  "year":"2019", "bggId":"274364", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]}, 
    "wingspan":                         { "players":"1‚Äì5", "time":"40‚Äì70",  "year":"2019", "bggId":"266192", "quickStart":"Test", "expansions": [ {"name": "Asia", "quickStart": "Add Cards", "reminders": "Add New Cards", "rulebook": "", "youtube": "", "bggId": ""}, {"name": "Oceania", "quickStart": "Add Nectar", "reminders": "Add New Nectar", "rulebook": "wingspan.pdf", "youtube": "www.youtube.com", "bggId": ""}] },
    "harmonies":                        { "players":"1‚Äì4", "time":"30‚Äì45",  "year":"2024", "bggId":"414317", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "forest-shuffle":                   { "players":"2‚Äì5", "time":"40‚Äì60",  "year":"2023", "bggId":"377924", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "marvel-villainous":                { "players":"2‚Äì4", "time":"40‚Äì80",  "year":"2020", "bggId":"291457", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "brink":                            { "players":"2‚Äì5", "time":"45‚Äì90",  "year":"2024", "bggId":"415078", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "tend":                             { "players":"1‚Äì4", "time":"45‚Äì90",  "year":"2024", "bggId":"427388", "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]},
    "pillars-of-fate":                  { "players":"2",   "time":"40",     "year":"2025", "bggId":"",       "quickStart":"", "expansions": [ {"name": "", "quickStart": "", "reminders": "", "rulebook": "", "youtube": "", "bggId": ""}]}
  }
}
</script>

<script>
(() => {
  /* theme toggle */
  const root = document.documentElement;
  const saved = localStorage.getItem("theme");
  if (saved) root.setAttribute("data-theme", saved);
  document.getElementById("themeToggle").addEventListener("click", () => {
    const curr = root.getAttribute("data-theme");
    const next = curr === "dark" ? "light" : "dark";
    root.setAttribute("data-theme", next);
    localStorage.setItem("theme", next);
  });

  /* BG Stats helpers */
  const BGSTATS_ID_PREFIX_APP  = 'bgstats://app.bgstatsapp.com/addPlay.html?gameId=';
  const BGSTATS_ID_PREFIX_WEB  = 'https://bgstats.app/bgg/';
  const BGSTATS_SLUG_PREFIX_WEB = 'https://bgstats.app/game/';
  const extractBggId = (urlOrId) => {
    if (!urlOrId) return '';
    const m = String(urlOrId).match(/(\d{2,})/);
    return m ? m[1] : '';
  };
  const bgstatsUrl = (slug) => `${BGSTATS_SLUG_PREFIX_WEB}${slug}`;

  /* data */
  const RAW = JSON.parse(document.getElementById('games-json').textContent);
  const slugify = s => s.toLowerCase()
    .replace(/[:‚Äô'"]/g,"")
    .replace(/&/g,"and")
    .replace(/[^a-z0-9]+/g,"-")
    .replace(/(^-|-$)/g,"");
  const qp = n => new URL(location.href).searchParams.get(n)||"";
  const basePath = () =>
    location.pathname
      .replace(/\/index\.html$/,'')
      .replace(/\/$/,'');
  const rulebookUrl = s => `${basePath()}/rulebooks/${s}.pdf`;
  const remindersUrl = s => `${basePath()}/reminders/${s}.html`;
  function coverUrl(slug){
    const bp = basePath();
    return `${bp}/covers/${slug}.webp`;  // full cover shown (no crop)
  }

  const DATA = {};
  (RAW.names || []).forEach(name => {
    const slug = slugify(name);
    DATA[slug] = { name, slug, ...(RAW.enrich?.[slug] || {}) };
  });

  const $app = document.getElementById('app');

  function listRow(g){
    const subbits = [g.players, g.time ? `${g.time} min` : null, g.year]
      .filter(Boolean)
      .join(" ‚Ä¢ ");
    return `
      <a class="card" href="#/game/${g.slug}">
        <div class="thumb">
          <img loading="lazy" src="${coverUrl(g.slug)}" onerror="this.parentNode.style.display='none'">
        </div>
        <div class="metaWrap">
          <h2>${g.name}</h2>
          <p class="sub">${subbits}</p>
        </div>
      </a>`;
  }

  function renderList(filter=""){
    const f = (filter || "").toLowerCase();
    const games = Object.values(DATA)
      .filter(g => !f || g.name.toLowerCase().includes(f))
      .sort((a,b) => a.name.localeCompare(b.name));
    $app.innerHTML = `
      <input id="search" placeholder="Search your collection‚Ä¶" aria-label="Search games" value="${filter.replace(/"/g,'&quot;')}">
      <section class="grid">
        ${games.map(listRow).join("")}
      </section>`;
    document.getElementById('search').addEventListener('input', e => renderList(e.target.value));
  }

  function expansionSlug(name){ return slugify(name); }
  function expansionRulebook(gameSlug, exp){
    // if explicit rulebook URL is provided, use it; else build a default path
    if (exp.rulebook) return exp.rulebook;
    const es = expansionSlug(exp.name || "");
    return rulebookUrl(`${gameSlug}--${es}`.replace(/\.pdf$/,'')); // "<game>--<exp>.pdf"
  }

  // Render expansions with their own quick setup, reminders, rulebook, BG Stats, and video
  function renderExpansions(game){
    const exps = Array.isArray(game.expansions) ? game.expansions : [];
    if (!exps.length) return "";
    const blocks = exps.map(exp => {
      const expName = exp.name || "Expansion";
      const expRulebook = expansionRulebook(game.slug, exp);

      const expBggId = extractBggId(exp.bggId || "");
      const baseBggId = extractBggId(game.bggId || "");
      const id = expBggId || baseBggId;

      const links = {
        rulebook: expRulebook,
        youtube: exp.youtube || "",
        bgstats: id ? `${BGSTATS_ID_PREFIX_WEB}${id}` : "",
        bgstatsApp: id ? `${BGSTATS_ID_PREFIX_APP}${id}` : null
      };

      const qs  = (exp.quickStart || "").trim();
      const rem = (exp.reminders  || "").trim();

      return `
        <details class="expansion">
          <summary><span class="expansion-name">${expName}</span></summary>
          <div class="expansion-body">
            ${qs ? `<div class="expansion-text-block"><h4>Quick Setup</h4><p>${qs.replace(/\n/g,"<br>")}</p></div>` : ""}
            ${rem ? `<div class="expansion-text-block"><h4>Quick Reminders</h4><p>${rem.replace(/\n/g,"<br>")}</p></div>` : ""}
            <div class="expansion-btns">
              ${links.rulebook ? `<a class="btnlink" href="${links.rulebook}" target="_blank" rel="noopener">Rulebook</a>` : ""}
              ${links.youtube ? `<a class="btnlink" href="${links.youtube}" target="_blank" rel="noopener">‚ñ∂Ô∏è How-to-Play</a>` : ""}
            </div>
          </div>
        </details>`;
    }).join("");

    return `
      <section id="exp" class="exp">
        <h3>Expansions</h3>
        ${blocks}
      </section>`;
  }

  function renderDetail(slug, action="quicksetup"){
    const g = DATA[slug];
    if(!g){
      $app.innerHTML = `<div class="detail"><p>Game not found: <code>${slug}</code></p></div>`;
      return;
    }
    const subbits = [g.players, g.time ? `${g.time} min` : null, g.year]
      .filter(Boolean)
      .join(" ‚Ä¢ ");
    const id = extractBggId(g.bggId);
    const links = {
      youtube: g.youtube || "",
      bgstats: id ? `${BGSTATS_ID_PREFIX_WEB}${id}` : bgstatsUrl(slug),
      bgstatsApp: id ? `${BGSTATS_ID_PREFIX_APP}${id}` : null,
      reminders: g.reminders || remindersUrl(slug),
      rulebook: g.rulebook || rulebookUrl(slug),
      cover: coverUrl(slug)
    };

    
       // Base-game quick setup / reference sections
    const quickText        = (g.quickStart || "").trim();
    const remindersText    = (g.remindersText && String(g.remindersText).trim()) || "";
    const playerCountSetup = (g.playerCountSetup || "").trim();
    const startingResources = (g.startingResources || "").trim();
    const turnStructure    = (g.turnStructure || "").trim();
    const commonMistakes   = (g.commonMistakes || "").trim();

    const quickBlocksHtml = `
      <details class="expansion" id="quick-setup-block" ${quickText ? "open" : ""}>
        <summary><span class="expansion-name">Quick Set Up</span></summary>
        <div class="expansion-body">
          <div class="expansion-text-block">
            <p>${(quickText || "(No quick setup yet.)").replace(/\n/g,"<br>")}</p>
          </div>
        </div>
      </details>

      <details class="expansion" id="reminders-block">
        <summary><span class="expansion-name">Reminders</span></summary>
        <div class="expansion-body">
          <div class="expansion-text-block">
            <p>${(remindersText || "(No reminders yet.)").replace(/\n/g,"<br>")}</p>
          </div>
        </div>
      </details>

      <details class="expansion" id="playercount-block">
        <summary><span class="expansion-name">Player Count Setup</span></summary>
        <div class="expansion-body">
          <div class="expansion-text-block">
            <p>${(playerCountSetup || "(No player-count-specific setup yet.)").replace(/\n/g,"<br>")}</p>
          </div>
        </div>
      </details>

      <details class="expansion" id="starting-resources-block">
        <summary><span class="expansion-name">Starting Resources & Setup Checklist</span></summary>
        <div class="expansion-body">
          <div class="expansion-text-block">
            <p>${(startingResources || "(No starting resources/checklist yet.)").replace(/\n/g,"<br>")}</p>
          </div>
        </div>
      </details>

      <details class="expansion" id="turn-structure-block">
        <summary><span class="expansion-name">Turn Structure / Phases</span></summary>
        <div class="expansion-body">
          <div class="expansion-text-block">
            <p>${(turnStructure || "(No turn structure summary yet.)").replace(/\n/g,"<br>")}</p>
          </div>
        </div>
      </details>

      <details class="expansion" id="common-mistakes-block">
        <summary><span class="expansion-name">Common Mistakes</span></summary>
        <div class="expansion-body">
          <div class="expansion-text-block">
            <p>${(commonMistakes || "(No common mistakes noted yet.)").replace(/\n/g,"<br>")}</p>
          </div>
        </div>
      </details>
    `;
    $app.innerHTML = `
      <article class="detail">
        <figure class="cover"><img src="${links.cover}" alt=""></figure>
        <div>
          <h2 class="title">${g.name}</h2>
          <p class="byline">${subbits || ""}</p>
          <div class="actions">
            <!-- Quick Set Up / Reminders block at the top -->
            <section id="qs" class="exp">
              ${quickBlocksHtml || "<p>(No quick setup/reminders yet.)</p>"}
            </section>

            <!-- Expansions block (unchanged, still collapsible per expansion) -->
            ${renderExpansions(g)}

            <!-- Buttons in new order: Rulebook, BG Stats, How-to-Play, Share -->
            <a class="btnlink" href="${links.rulebook}" target="_blank" rel="noopener">Open Rulebook (PDF)</a>
            <a class="btnlink" id="btn-bgstats" href="${links.bgstats}" target="_blank" rel="noopener">BG Stats ‚Äî Log a Play</a>
            <a class="btnlink" id="btn-youtube" ${links.youtube ? `href="${links.youtube}" target="_blank" rel="noopener"` : ""}>‚ñ∂Ô∏è How-to-Play</a>

            <button class="btn" id="share">Share / Copy Link</button>
          </div>
        </div>
      </article>
      <footer>Rulebook path: <code>${links.rulebook}</code></footer>`;

    // Share button
    document.getElementById('share').addEventListener('click', async () => {
      const u = location.href;
      try {
        if (navigator.share) {
          await navigator.share({title:`${g.name}`, text:`Quick Menu ‚Äî ${g.name}`, url:u});
          return;
        }
      } catch(e){}
      try {
        await navigator.clipboard.writeText(u);
        alert("Link copied");
      } catch(e){
        prompt("Copy link:", u);
      }
    });

    // BG Stats app-first behavior (base game)
    const bgbtn = document.getElementById('btn-bgstats');
    if (bgbtn) {
      bgbtn.addEventListener('click', (e) => {
        // If we have an app deep link, use it and DO NOT fall back to web
        if (links.bgstatsApp) {
          e.preventDefault();
          window.location.href = links.bgstatsApp;
        }
        // else: no app link available, let the normal href (web URL) behave as-is
      });
    }

    // BG Stats deep-link for expansions (if any)
    document.querySelectorAll('.expansion-bgstats').forEach(el => {
      const appUrl = el.dataset.app;
      const webUrl = el.getAttribute('href');
      if (!appUrl) return; // just use normal web link
      el.addEventListener('click', (e) => {
        e.preventDefault();
        let fallbackTimer = setTimeout(() => { window.open(webUrl, '_blank', 'noopener'); }, 700);
        const a = document.createElement('a');
        a.href = appUrl;
        a.style.display='none';
        document.body.appendChild(a);
        a.click();
        setTimeout(()=>{ try{document.body.removeChild(a)}catch{} }, 1200);
      });
    });

    // Respect &action param (for things like ?action=youtube)
    const actionLower = (action || "").toLowerCase();
    if (actionLower && actionLower !== "quicksetup") {
      const map = { youtube:"#btn-youtube" };
      const sel = map[actionLower];
      if (sel) document.querySelector(sel)?.click();
    }
  }

  function normalizeIncoming(){
    const q = qp("game");
    if (q){
      const want = q.trim();
      const slugged = slugify(want);
      const a = (qp("action") || "quicksetup").toLowerCase();
      location.replace(`#\/game\/${slugged}?action=${encodeURIComponent(a)}`);
      return true;
    }
    return false;
  }

  function parseHash(){
    const h = location.hash || "#/";
    const [path,q] = h.slice(2).split("?");
    const parts = (path || "").split("/");
    const params = new URLSearchParams(q || "");
    if (parts[0] === "game" && parts[1])
      return {route:"detail", slug:parts[1].toLowerCase(), action:(params.get("action") || "quicksetup").toLowerCase()};
    return {route:"list"};
  }

  function render(){
    if (normalizeIncoming()) return;
    const {route, slug, action} = parseHash();
    route === "detail" ? renderDetail(slug, action) : renderList("");
  }

  window.addEventListener("hashchange", render);
  document.addEventListener("DOMContentLoaded", render);

  /* service worker */
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register(`${basePath()}/sw.js`).catch(()=>{});
  }
})();
</script>
</body>
</html>
